<!-- Card Programa -->
<div class="container my-3">
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">

    {% for programa in curtidos %}
  <div class="col d-flex">
    <div class="card programa-card shadow-sm w-100 d-flex flex-column border-0 rounded-4 overflow-hidden" style="background:#ffffff;">
      
      {% if programa.banner_programa %}         
        <img src="{{ programa.banner_programa.url }}" class="w-100" style="height:220px; object-fit:cover;" alt="Banner {{ programa.nome_programa }}">
      {% else %}
        <img src="https://via.placeholder.com/600x400" class="w-100" style="height:220px; object-fit:cover;" alt="Banner padrão">
      {% endif %}

      <div class="p-4 d-flex flex-column h-100">
        <h4 class="fw-bold mb-2" style="color:#2f3e46;">{{ programa.nome_programa }}</h4>
        <p class="text-muted mb-3">{{ programa.descricao_programa|truncatewords:12 }}</p>

        <div class="d-flex align-items-center mt-auto pt-2 justify-content-between">
          <div class="d-flex align-items-center">
            <div class="rounded-circle d-flex align-items-center justify-content-center me-2" 
                style="width:32px; height:32px; background:#dff1e8;">
              <i class="bi bi-person text-muted"></i>
            </div>
            <div>
              <small class="text-muted d-block lh-1">Artista</small>
              <span class="fw-semibold small">{{ programa.apresentador_programa }}</span>
            </div>
          </div>

          <a href="{% url 'radio:episodios' programa.id %}" 
             class="btn btn-outline-success btn-sm rounded-4 px-3">Episódios</a>
        </div>

        <!-- Botão descurtir -->
        <form action="{% url 'radio:registrar_curtida' %}" method="POST" class="mt-3">
          {% csrf_token %}
          <input type="hidden" name="id_programa" value="{{ programa.id }}">
          <input type="hidden" name="next" value="{{ request.get_full_path }}">

          <button type="submit" class="border-0 bg-transparent p-0" style="cursor:pointer;">
            <i class="bi bi-heart-fill text-danger fs-4"></i>
          </button>
        </form>

      </div>
    </div>
  </div>
{% empty %}
  <p class="text-center text-muted">Você ainda não curtiu nenhum programa.</p>
{% endfor %}
  </div>
</div>


<!-- Paginação -->
{% if programas.paginator.count > 0 %}
<nav aria-label="Page navigation" class="mt-4">
  <ul class="custom-pagination">

    <!-- Botão Anterior -->
    {% if programas.has_previous %}
      <li>
        <a href="?page={{ programas.previous_page_number }}" class="arrow-btn">‹</a>
      </li>
    {% else %}
      <li><span class="arrow-btn disabled">‹</span></li>
    {% endif %}

    <!-- Números -->
    {% for num in programas.paginator.page_range %}
      {% if programas.number == num %}
        <li><span class="page-number active">{{ num }}</span></li>
      {% else %}
        <li><a href="?page={{ num }}" class="page-number">{{ num }}</a></li>
      {% endif %}
    {% endfor %}

    <!-- Botão Próximo -->
    {% if programas.has_next %}
      <li>
        <a href="?page={{ programas.next_page_number }}" class="arrow-btn">›</a>
      </li>
    {% else %}
      <li><span class="arrow-btn disabled">›</span></li>
    {% endif %}

  </ul>
</nav>
{%endif%}

